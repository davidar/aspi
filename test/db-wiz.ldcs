#enum customer: mailing_state="Bihar"   billing_state="Bihar"  ip_address_state="Bihar"
              |                         billing_state="Kerala" ip_address_state="Kerala"
              |                                                ip_address_state="Punjab"
              | mailing_state="Gujarat" billing_state="Punjab" ip_address_state="Gujarat"
              .

#enum user: email="asdf@fake.com"
          | email="bob@builder.com"
          | email="asdf@fake.com"
          .

#mode genus(out,out) is multi.
#enum plant: genus="Astragalus" species="annularis"
           | genus="Astragalus" species="anisus"
           | genus="Astragalus" species="annularis"
           | genus="Eugenia" species="fulva"
           | genus="Eugenia" species="foetida"
           | genus="Eugenia" species="lamprophylla"
           .

#enum owner: maher | rishi | chandra.

#enum pet: pet_owner=owner.1 type="dog"
         | pet_owner=owner.1 type="cat"
         | pet_owner=owner.2 type="dog"
         | pet_owner=owner.2 type="parakeet"
         .

#enum dog: dog_owner="ken"   name="darcy"
         | dog_owner="bob"   name="darcy"
         | dog_owner="bob"   name="lassie"
         | dog_owner="ahmed" name="darcy"
         | dog_owner="sara"  name="floof"
         | dog_owner="sara"  name="lassie"
         .


% SELECT customer
%        , COALESCE(
%           mailing_state,
%           billing_state,
%           ip_address_state
%        ) AS state
% FROM addresses
tuple(customer C, mailing_state.C || billing_state.C || ip_address_state.C)?

% SELECT email, COUNT(*)
% FROM users
% GROUP BY email
% HAVING COUNT(*) > 1
tuple(E email.user, count{{email=E}} (> 1))?

% SELECT COUNT(DISTINCT species), genus
% FROM plants
% GROUP BY 2
% ORDER BY 1 ASC
tuple(count{species.genus=G}, G genus.plant)?

% SELECT owner
% , SUM(CASE 
%     WHEN type = 'dog' THEN 1 
%     ELSE 0 END) AS num_dogs
% , SUM(CASE 
%     WHEN type = 'cat' THEN 1
%     ELSE 0 END) AS num_cats
% , SUM(CASE
%     WHEN type NOT IN ('dog', 'cat') THEN 1
%     ELSE 0 END) AS num_other
% FROM pets
% GROUP BY owner
tuple(O pet_owner.pet, count{pet_owner=O type="dog"})?
tuple(O pet_owner.pet, count{pet_owner=O type="cat"})?
tuple(O pet_owner.pet, count{pet_owner=O type=(~"dog" ~"cat")})?

% SELECT owner
% FROM dogs
% WHERE name in (
%   SELECT name
%   FROM dogs
%   GROUP BY name
%   HAVING count(*) > 2)
dog_owner.name=N :- count{name=N} > 2?
